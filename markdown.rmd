---
title: "An Extended Commentary On Post-Publication Peer Review In Organizational Neuroscience"
knit: (function(input_file, encoding) {
  out_dir <- 'docs';
  rmarkdown::render(input_file,
 encoding=encoding,
 output_file=file.path(dirname(input_file), out_dir, 'index.html'))})
author: "Guy A. Prochilo"
date: "February 10, 2019"
output:
  html_document:
    toc: true
    toc_float: true
    number_sections: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This R Markdown document reproduces the results found in the above publication.

## Instructions

1. Install R and RStudio

These results were generated on `Windows 10` using:

&nbsp;
`RStudio Version 1.1.456`

&nbsp;
`R Version 3.5.1`

2. Download the analysis files

Download or clone the git repository for this analysis: https://github.com/gprochilo/org_neuro_com
&nbsp;

The files within this repository must be in a single directory on your operating system to reproduce the analyses for this publication.

3. Open `analysis.Rproj`

This file is located in the directory where you have saved the `org_neuro_com` repository. This will open an `RStudio` session in the current working directory.

4. Install the required packages

This analysis pipeline requires you to install the following packages.

```{r eval=FALSE}
install.packages("ggplot2")
install.packages("scales")
install.packages("ggrepel")
install.packages("ggpubr")
install.packages("SuppDists")
install.packages("psych")
install.packages("cocor")
install.packages("pbapply")
install.packages("reshape2")
install.packages("devtools")
```

The cannonball package can be installed from Github after installing devtools.

```{r eval=FALSE}
install_github("janhove/cannonball")
```

5. Run markdown.rmd

Open `markdown.rmd` in `RStudio` and select **Knit**. This will reproduce this document and all associated analyses. 

## Prepare R Workspace

1. Load the required packages

R Markdown will load and attach all required packages.

```{r results='hide', message=FALSE, warning=FALSE}
source("libraries.R")
```

2. Source the analysis scripts

All scripts for reproducing the results in this publication can be found in `prochFun_ONC.R` (Prochilo functions for Organizational Neuroscience Commentary). R Markdown will source this file so that all scripts are loaded into R. 

```{r eval=TRUE}
source("prochFun_ONC.R")
```

## Figures

### Figure 1

Reproduce the dot plot presented in Figure 1. 

```{r, fig.width=4,fig.height=7}
bean.plot(csv.name = "citeData.csv", keep.cite = c(
  "Waldman et al. (2011)",
  "Boyatzis et al. (2012)",
  "Peterson et al. (2008)",
  "Waldman et al. (2013; 2015)",
  "Kim and James (2015)"))
```

### Figure 2

#### Figure 2A and 2B raw data

The raw data used for generating Figure 2A and 2B can be reproducing with the following script. 

```{r eval=TRUE}
gendat(rho = 0.1, r.range = c(0.387,0.389))
```

#### Figure 2A

Reproduce the scatterplot presented in Figure 2A. 

```{r, fig.width=6,fig.height=6}
cor.plot(show.ci = FALSE)
```

#### Figure 2B

Reproduce the scatterplot presented in Figure 2B.

```{r, fig.width=6,fig.height=6}
cor.plot(show.ci = TRUE)
```

#### Figure 2C

Reproduce the simulation presented in Figure 2C. Summary _r_ coefficients, confidence intervals, and _p_ values for each random sample are reproduced in full. 

```{r, fig.width=10,fig.height=15}
r.sampling(r = 0.10, n = 50, samples = 100, color = "rci", seedval = 0)
```

### Figure 3

Reproduce scatterplots consistent with _r_ = 0.36 and _N_ = 50. Note: the software outputs _N_ rather than _df_ in the title. This has been adjusted in the associated publication. 

```{r, fig.width=10,fig.height=10}
plot.r(r = 0.36, n = 50, plot = TRUE)
```

### Figure 4

Reproduce Figure 4A and Figure 4B. Figure 4A (upper) is graphical representation of _r_ = .26 and _r_ = .36 and their 95% CIs with a sample of _N_ = 50. Figure 4B (lower) is the results of Zou's test. 

```{r eval = TRUE}
zou.test(
  r.jk=.36, 
  r.jh=.26, 
  r.kh=.39, 
  n=50, 
  twotailed = TRUE, 
  alpha=0.05, 
  conf.level=0.95, 
  null.value=0,
  plot = TRUE
)
```

### Figure 5

Reproduce the simulation presented in Figure 5 and its associated dataset. The code in this R Markdown file uses a CSV file that contains the data generated by the simulation instead of running the simulation itself. To run the full simulation you may run the following scripts outside of the R Markdown environment:
&nbsp;
`source("libraries.R")`
`source("prochFun_ONC.R")`
`errorPlot(comparisons = 50,sampleSize = 17,reps = 10000,plotname = "errorPlot")`. 
&nbsp;
Note: The above simulation can take 3-5 minutes.

```{r, fig.width=8,fig.height=4}
errorPlot.lazy("figure_5_data.csv")
```

## Waldman et al. (2011a)

### Confidence interval computations

#### _r_(48) = 0.36, _p_ < .05

```{r eval=TRUE}
r.confidence(0.36,50,twotailed = TRUE)
```

####  _r_(48) = 0.26, _p_ < .10

```{r eval=TRUE}
r.confidence(0.26,50,twotailed = TRUE)
```

### Zou's test

```{r, fig.width=7,fig.height=5}
zou.test(
  r.jk=.36, 
  r.jh=.26, 
  r.kh=.39, 
  n=50, 
  twotailed = TRUE, 
  alpha=0.05, 
  conf.level=0.95, 
  null.value=0,
  plot = FALSE,
  save.plot = FALSE
)
```


## Waldman et al. (2013a)

### Confidence interval computations

#### _r_(24) = 0.32, _p_ < .05 (Two-tailed test)

```{r eval=TRUE}
r.confidence(0.32,26,twotailed = TRUE)
```

#### _r_(24) = 0.32, _p_ < .05 (One-tailed test)

```{r eval=TRUE}
r.confidence(0.32,26,twotailed = FALSE)
```

## Kim and James (2015)

### Confidence interval computations

#### _r_(48) = 0.49, _p_ < .05

```{r eval=TRUE}
r.confidence(0.49,17,twotailed = TRUE)
```

### Critical _r_ computations

#### Critical _r_ value for a study with _N_ = 17

```{r eval=TRUE}
critical.r(n = 17, alpha = .05, twotailed = TRUE)
```

